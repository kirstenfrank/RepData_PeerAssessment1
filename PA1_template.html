<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="generator" content="pandoc" />



<title>Reproducible Research: Peer Assessment 1</title>

<script src="PA1_template_files/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="PA1_template_files/bootstrap-2.3.2/css/bootstrap.min.css" rel="stylesheet" />
<link href="PA1_template_files/bootstrap-2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
<script src="PA1_template_files/bootstrap-2.3.2/js/bootstrap.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="PA1_template_files/highlight/default.css"
      type="text/css" />
<script src="PA1_template_files/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
</style>
<div class="container-fluid main-container">


<div id="header">
<h1 class="title">Reproducible Research: Peer Assessment 1</h1>
</div>


<div id="loading-and-preprocessing-the-data" class="section level2">
<h2>Loading and preprocessing the data</h2>
<pre class="r"><code>unzip(&quot;activity.zip&quot;)  #Unzip data.
activity&lt;-read.csv(&quot;activity.csv&quot;)  ## read file into R</code></pre>
<p>Convert the dates into proper dates, using as.Date and as.factor.</p>
<pre class="r"><code>activity$date&lt;-as.Date(activity$date)
activity$date&lt;-as.factor(activity$date)
library(lubridate)
activity$weekday&lt;-wday(activity$date, label=TRUE)</code></pre>
</div>
<div id="what-is-mean-total-number-of-steps-taken-per-day" class="section level2">
<h2>What is mean total number of steps taken per day?</h2>
<p>The best way to determine this is to convert days into a factor and make a new dataframe that is the result of summing the step in each day. Then use this dataframe to make a mean over all days.</p>
<pre class="r"><code>results&lt;-tapply(activity$steps,activity$date, sum, na.rm=TRUE)
### Datatable &quot;results&quot; keeps the information.
mean(results)</code></pre>
<pre><code>## [1] 9354</code></pre>
<pre class="r"><code>median(results)</code></pre>
<pre><code>## [1] 10395</code></pre>
<pre class="r"><code>hist(results, breaks = 10, main = &quot;Frequency of days with steps in range&quot;)</code></pre>
<p><img src="PA1_template_files/figure-html/histogram.png" alt="plot of chunk histogram" /></p>
<p>Results show a normal-looking distribution with possible outliers at zero and &gt;20,000. The mean number of steps per day is 9354. The median number of steps per day is 10395.</p>
</div>
<div id="what-is-the-average-daily-activity-pattern" class="section level2">
<h2>What is the average daily activity pattern?</h2>
<p>The only information about time in the day is contained in the interval number.</p>
<pre class="r"><code>activity$intlevels&lt;-as.ordered(activity$interval)
stepstime&lt;-tapply(activity$steps,activity$intlevels,mean,na.rm=TRUE)
stepstime&lt;-as.data.frame(stepstime)
stepstime$interval&lt;-row.names(stepstime)
stepstime$avesteps&lt;-stepstime$stepstime
stepstime$interval&lt;-as.integer(stepstime$interval)
plot(stepstime$interval,stepstime$avesteps,type=&quot;l&quot;)</code></pre>
<p><img src="PA1_template_files/figure-html/dailyactivity.png" alt="plot of chunk dailyactivity" /></p>
<pre class="r"><code>which.max(stepstime$avesteps)</code></pre>
<pre><code>## 835 
## 104</code></pre>
<p>Conclusions: the highest activity is at 835.</p>
</div>
<div id="imputing-missing-values" class="section level2">
<h2>Imputing missing values</h2>
<p>The technique for calculating a value to impute for missing values is calculate an average for that time of day. This information is in the dataset stepstime and needs to be transferred back to the dataset activity.</p>
<p>First, how many values are NA? There are 17568. There are 15264 complete cases. Therefore, there are 2304.</p>
<p>I want to use the mean for that 5 minute interval across the days to fill in the missing values.</p>
<pre class="r"><code>## Use merge to fill up the table with avesteps as a new variable.
newdata&lt;-merge(activity,stepstime,by=&quot;interval&quot;)

## Note that order has been changed, but that isn&#39;t important.

newdata$imputesteps&lt;-ifelse(is.na(newdata$steps), newdata$avesteps,newdata$steps)

###YAYYYYYYY, this actually fills in the missing values</code></pre>
<p>Now to repeat the analysis with imputed values.</p>
<pre class="r"><code>newresults&lt;-tapply(newdata$imputesteps,newdata$date, sum, na.rm=TRUE)
### Datatable &quot;results&quot; keeps the information.
mean(newresults)</code></pre>
<pre><code>## [1] 10766</code></pre>
<pre class="r"><code>median(newresults)</code></pre>
<pre><code>## [1] 10766</code></pre>
<pre class="r"><code>hist(newresults, breaks = 10, main = &quot;Frequency of days with steps in range using imputed data&quot;)</code></pre>
<p><img src="PA1_template_files/figure-html/unnamed-chunk-2.png" alt="plot of chunk unnamed-chunk-2" /></p>
<p>The mean steps per day are 1.0766 × 10<sup>4</sup> and the median steps per data are 1.0766 × 10<sup>4</sup>. These are higher than before, which makes sense. The mean equals the median, which makes me think there is a mistake in the calculation. But I can’t find it yet. There are many fewer days with lower numbers of steps.</p>
</div>
<div id="are-there-differences-in-activity-patterns-between-weekdays-and-weekends" class="section level2">
<h2>Are there differences in activity patterns between weekdays and weekends?</h2>
<p>First figure which days are weekend and which are not.</p>
<pre class="r"><code>## Setup weekend vs weekday as a factor.
activity$weekend&lt;-
    ifelse(activity$weekday %in% c(&quot;Mon&quot;,&quot;Tues&quot;,&quot;Wed&quot;,&quot;Thurs&quot;,&quot;Fri&quot;),&quot;weekday&quot;,&quot;weekend&quot;)
activity$weekend&lt;-as.factor(activity$weekend)</code></pre>
<p>Then break into two datasets, one for weekends and one for weekdays.</p>
<pre class="r"><code>weekdayset&lt;-subset(activity, activity$weekend==&quot;weekday&quot;)
weekendset&lt;-subset(activity, activity$weekend==&quot;weekend&quot;)
## average activity over time for weekdays
aveweekday&lt;-tapply(weekdayset$steps,weekdayset$intlevels,mean,na.rm=TRUE)
aveweekend&lt;-tapply(weekendset$steps,weekendset$intlevels,mean,na.rm=TRUE)

aveweekday&lt;-as.data.frame(aveweekday)
aveweekday$interval&lt;-row.names(aveweekday)
aveweekday$avesteps&lt;-aveweekday$aveweekday
aveweekday$interval&lt;-as.integer(aveweekday$interval)
aveweekend&lt;-as.data.frame(aveweekend)
aveweekend$interval&lt;-row.names(aveweekend)
aveweekend$avesteps&lt;-aveweekend$aveweekend
aveweekend$interval&lt;-as.integer(aveweekend$interval)
newplot&lt;-merge(aveweekday,aveweekend,by=&quot;interval&quot;)
library(ggplot2)</code></pre>
<p>Plot two diagrams of average steps vs. time on weekdays, and average steps vs. time on weekend days.</p>
<pre class="r"><code>ggplot(newplot,aes(interval,aveweekday)) + geom_line()</code></pre>
<p><img src="PA1_template_files/figure-html/unnamed-chunk-51.png" alt="plot of chunk unnamed-chunk-5" /></p>
<pre class="r"><code>ggplot(newplot,aes(interval,aveweekend)) + geom_line()</code></pre>
<p><img src="PA1_template_files/figure-html/unnamed-chunk-52.png" alt="plot of chunk unnamed-chunk-5" /></p>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with --self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
